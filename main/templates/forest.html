<!DOCTYPE html>
<html>

<head>
  {% load static %}
  <script>const media_url = "{% get_media_prefix %}";</script>
  <title>Sustainable Campus</title>
  <link rel="stylesheet" href="/static/css/forest.css" />
  <link rel="stylesheet" href="{% static 'css/navbar.css' %}" />
  <link href="https://cdn.lineicons.com/5.0/lineicons.css" rel="stylesheet" />
  <link rel="stylesheet" href="{% static '/bootstrap/css/bootstrap.min.css' %}" />
  <script src="//code.jquery.com/jquery-1.10.2.js"></script>
  <script src="//code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
  <script>

    function onDrop(event) {
      //gets id of dropped litter
      const litterId = event.dataTransfer.getData('text');
      const litter = document.getElementById(litterId);

      //gets dropzone
      const recyclingDropzone = event.target;
      console.log("dropped " + litterId + " into " + recyclingDropzone.id);
      litter.style.backgroundColor = "pink";
    }

    function onDragOver(event) {
      event.preventDefault();
    }

  </script>
  <style>
    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
  </style>
</head>

<body>
  {% include 'navbar.html' %}

  <div id="forest-view" style="position: relative; background: #48c2e0">
    <div id="forest-background">

      <div id="forest-background-left"></div>
      <div id="forest-background-right"></div>

      <div class="forest-container">
        <div id="forest-floor-texture"></div>
      </div>
      <div class="forest-container">
        <div class="forest-floor" id="forest-images"></div>
      </div>
      <div class="forest-container">
        <div id="forest-grid"></div>
      </div>


    </div>


    <!-- cell selected popup -->
    <div class="forest-popup" id="occupied-popup">
      <div class="popup-title">
        <div id="close-occupied-popup" class="close-popup">
          <i class="lni lni-xmark"
            style="width: 100%; height: 100%; display: inline-block; font-size: max(4vw, 40px);"></i>
        </div>
        <div id="plant-name" style="font-size: max(2.5vw, 25px);">Customise</div>
      </div>
      <div style="width: 90%; margin: auto;">
        <div>
          <img id="selected-plant-image" src="" alt="" style="height: 100%; width: 100%;">
        </div>
        <label id="selected-plant-description">plant description</label>
      </div>

    </div>


    <div class="forest-popup" id="empty-popup">
      <div class="popup-title">
        <div id="close-empty-popup" class="close-popup">
          <i class="lni lni-xmark"
            style="width: 100%; height: 100%; display: inline-block; font-size: max(4vw, 40px);"></i>
        </div>
        <div style="font-size: max(2.5vw, 25px);">Select plant</div>
      </div>
    </div>


    <div class="button-popup" id="customise-popup">
      <div class="popup-title">
        <div id="close-customise-popup" class="close-popup">
          <i class="lni lni-xmark"
            style="width: 100%; height: 100%; display: inline-block; font-size: max(4vw, 40px);"></i>
        </div>
        <div style="font-size: max(2.5vw, 25px);">Customise</div>
      </div>

      <div class="grid-container" id="customise-grid" style="width: 90%;">
      </div>
    </div>

    <div class="button-popup" id="sell-popup">
      <div class="popup-title">
        <div id="close-sell-popup" class="close-popup">
          <i class="lni lni-xmark"
            style="width: 100%; height: 100%; display: inline-block; font-size: max(4vw, 40px);"></i>
        </div>
        <div style="font-size: max(2.5vw, 25px);">Sell Land</div>
      </div>

      <div id="sell-body" style="width: 90%; margin-left: auto;">
        <div>
          Sell your land for currency - the more plants and biodiversity will yield a higher worth!
        </div>

      </div>
    </div>

    <div id="recycling-popup">
      <div class="popup-title">
        <div id="close-recycling-popup" class="close-popup">
          <i class="lni lni-xmark"
            style="width: 100%; height: 100%; display: inline-block; font-size: max(4vw, 40px); "></i>
        </div>
        <div style="font-size: max(2.5vw, 25px);">Recycling</div>
      </div>
      <div id="recycling-container"
        style="position: absolute; top: 4vw;  bottom: 0px; width: 100%; display: unset; border: 1px solid #48c2e0">
        <div id="litter-container" style="height: 70%; width: 100%; background-color: #144f5e67;">

        </div>
        <div id="bin-container"
          style="display:flex; flex-direction: row; justify-content: space-around; height: 30%; width: 100%; background-color: #40145e67;">
          <div id="plastic-recycling" ondragover="onDragOver(event);" ondrop="onDrop(event);"
            style="background-color: red; height: 100%; width: 25%;"></div>
          <div id="paper-recycling" ondragover="onDragOver(event);" ondrop="onDrop(event);"
            style="background-color: blue; height: 100%; width: 25%;"></div>
          <div id="compost-recycling" ondragover="onDragOver(event);" ondrop="onDrop(event);"
            style="background-color: green; height: 100%; width: 25%;"></div>

        </div>
      </div>
    </div>

    <!-- Buttons -->

    <div id="button-container" class="w-100 d-flex gap-2">
      <button type="button" id="customise-button" class="btn btn-primary btn-lg flex-fill">Customise</button>
      <button type="button" id="sell-button" class="btn btn-primary btn-lg flex-fill">Sell land</button>
      <div id="recycling-button">

      </div>
    </div>
    <div id="retrieved-forest-content" class="data-container">{{user_forest}}</div>
    <div id="retrieved-inventory-content" class="data-container" style="position: fixed;">{{user_inventory}}</div>
  </div>



  <!-- Bootstrap JS -->
  <script src="{% static '/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <!-- forest js files -->
  <script type="module" src="{% static '/js/forestDisplay.js' %}"></script>
</body>

</html>